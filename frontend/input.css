@import "tailwindcss/base";
@import "tailwindcss/components";
@import "tailwindcss/utilities";

@layer components {
    /* Styles for when the sidebar is collapsed on desktop */
    .sidebar-collapsed #sidebar-container {
        @apply w-20 transition-all duration-300;
    }

    /* NEW: Hide expanded logo/text, show collapsed logo */
    .sidebar-collapsed .sidebar-expanded-logo {
        @apply hidden;
    }
    .sidebar-collapsed .sidebar-collapsed-logo {
        @apply block;
    }

    /* Hide text elements, show only icons */
    .sidebar-collapsed .nav-text,
    .sidebar-collapsed #user-name,
    .sidebar-collapsed #user-office,
    .sidebar-collapsed #logout-button,
    .sidebar-collapsed .sidebar-text,
    .sidebar-collapsed #sidebar-container .form-control {
        @apply hidden;
    }

    /* Center the icons and user avatar */
    .sidebar-collapsed #sidebar-container .menu li > a,
    .sidebar-collapsed #sidebar-container .menu li > details > summary,
    .sidebar-collapsed #sidebar-container #sidebar-toggle-btn {
        @apply justify-center;
    }
    
    .sidebar-collapsed #sidebar-container .flex.items-center.gap-3 {
        @apply justify-center;
    }

    /* Hide the dropdown arrow for details/summary */
    .sidebar-collapsed #sidebar-container .menu details > summary::after {
        @apply hidden;
    }

    /* Reduce padding on the main menu UL to prevent overflow */
    .sidebar-collapsed #sidebar-nav > .menu {
        @apply p-2;
    }

    /* --- NEW: Fly-out Submenu Logic for Collapsed Sidebar --- */
    .sidebar-collapsed #sidebar-container .menu li {
        @apply relative;
    }

    /* When collapsed, reduce horizontal padding on menu items to prevent overflow */
    .sidebar-collapsed .menu-lg :where(li > a),
    .sidebar-collapsed .menu-lg :where(li > details > summary) {
        @apply px-4;
    }

    /* When collapsed, style the submenu as a fly-out panel. It's shown when its parent <details> has the `open` attribute (handled by JS). */
    .sidebar-collapsed #sidebar-container .menu details > ul {
        @apply absolute left-full top-0 z-20 ml-2 w-52 rounded-box bg-base-200 p-2 shadow-lg;
    }
}
