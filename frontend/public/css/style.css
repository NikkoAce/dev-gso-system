/* FILE: frontend/public/style.css (New Shared CSS) */
body { font-family: 'Inter', sans-serif; }
@media print {
    .non-printable { display: none !important; }
    #print-container { display: block !important; }

    /* Reset layout for printing */
    body, html {
        height: auto;
        background-color: white !important; /* Ensure background is white */
    }
    
    /* Remove overflow restrictions from parent containers that prevent page breaks */
    body > .flex, 
    body > .flex > .flex-1 {
        display: block !important;
        height: auto !important;
        overflow: visible !important;
    }

    main {
        overflow: visible !important;
        padding: 0 !important;
    }

    .printable-area {
        border: none !important;
        box-shadow: none !important;
        padding: 0 !important;
        margin: 0 !important;
    }

    .page-break-after {
        page-break-after: always;
    }
}

/* --- FIX: Button Alignment with Tooltips --- */
/* DaisyUI's .tooltip class sets 'display: inline-block', which conflicts with
   .btn's 'display: inline-flex'. This override ensures that when both classes
   are on the same element, it behaves as a flex container, correctly aligning
   the icon and text. We use :not(.hidden) to avoid overriding Tailwind's hidden utility. */
.btn.tooltip:not(.hidden) {
    display: inline-flex;
}


/* --- Preview Mode --- */
body.print-preview-mode .hide-in-preview {
    display: none !important;
}

body.print-preview-mode {
    background-color: #525659; /* A neutral gray background for the preview */
    overflow: hidden; /* Prevent body scroll when preview is active */
}

/* When preview is active, find the main layout containers and remove their overflow properties
   to prevent them from clipping the fixed-position preview overlay. */
body.print-preview-mode .flex-1.flex.flex-col.overflow-hidden {
    overflow: visible !important;
}
body.print-preview-mode main.flex-1 {
    overflow: visible !important;
}


body.print-preview-mode .printable-area {
    position: fixed;
    inset: 0;
    z-index: 998;
    overflow: auto;
    padding: 2rem;
    background-color: transparent;
}

body.print-preview-mode .printable-area > * {
    margin: 0 auto;
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
    border: 1px solid #ccc;
    background: white;
}

/* A4 Portrait Size for preview */
body.print-preview-mode.preview-portrait .printable-area > * { width: 210mm; min-height: 297mm; }

/* Legal Landscape Size for preview */
body.print-preview-mode.preview-landscape .printable-area > * { width: 356mm; min-height: 216mm; }

#exit-preview-btn {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
}

.nav-link.active {
    background-color: oklch(var(--n) / var(--tw-bg-opacity, 1));
    color: oklch(var(--nc) / var(--tw-text-opacity, 1));
}

.sortable-ghost {
    opacity: 0.4;
    background-color: oklch(var(--b3) / 1);
}

/* --- Dashboard Edit Mode Styles --- */
.dashboard-grid.is-editing .dashboard-component {
    border: 2px dashed oklch(var(--b3));
    position: relative;
}

.dashboard-grid.is-editing .drag-handle {
    display: block;
    position: absolute;
    top: 8px;
    right: 8px;
    cursor: grab;
    padding: 4px;
    background-color: oklch(var(--b1) / 0.7);
    border-radius: 9999px;
    z-index: 10;
}

/* --- Desktop Sidebar Toggle --- */
#desktop-sidebar-toggle {
    /* Default position when sidebar is visible (w-64 = 16rem) */
    left: 16rem;
}

body.desktop-sidebar-collapsed #desktop-sidebar-toggle {
    /* Position when sidebar is hidden */
    left: 0.5rem;
}

@media (min-width: 768px) {
    body.desktop-sidebar-collapsed #sidebar-container {
        transform: translateX(-100%);
    }
}
