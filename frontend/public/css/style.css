/* FILE: frontend/public/style.css (New Shared CSS) */
body { font-family: 'Inter', sans-serif; }
@media print {
    /* A robust method to isolate printable content */
    /* 1. Hide everything by default */
    body * {
        visibility: hidden;
    }
    /* 2. Make the printable area and all its children visible */
    .printable-area, .printable-area * {
        visibility: visible;
    }
    /* 3. Position the printable area to take up the whole page */
    .printable-area {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        margin: 0 !important;
        padding: 1cm !important; /* Use 1cm padding for better print margins */
        box-shadow: none !important;
        border: none !important;
    }

    .page-break-after {
        page-break-after: always;
    }

    /* --- Optional but recommended improvements for table printing --- */
    table {
        page-break-inside: auto; /* Allow tables to break across pages */
    }
    tr {
        page-break-inside: avoid; /* Avoid breaking a single row across pages */
    }
    thead {
        display: table-header-group; /* Repeat table headers on each new page */
    }

    /* Force property card details into a single column for better wrapping */
    #asset-details-container .grid {
        grid-template-columns: repeat(1, minmax(0, 1fr)) !important;
    }
    #asset-details-container .md\:col-span-2 {
        grid-column: span 1 / span 1 !important;
    }

    /* Utility to force long words to wrap in print view */
    .print-break-words {
        overflow-wrap: break-word !important;
        word-wrap: break-word !important;
    }
}

/* --- FIX: Button Alignment with Tooltips --- */
/* DaisyUI's .tooltip class sets 'display: inline-block', which conflicts with
   .btn's 'display: inline-flex'. This override ensures that when both classes
   are on the same element, it behaves as a flex container, correctly aligning
   the icon and text. We use :not(.hidden) to avoid overriding Tailwind's hidden utility. */
.btn.tooltip:not(.hidden) {
    display: inline-flex;
}


/* --- Preview Mode --- */
body.print-preview-mode .hide-in-preview {
    display: none !important;
}

body.print-preview-mode {
    background-color: #525659; /* A neutral gray background for the preview */
    overflow: hidden; /* Prevent body scroll when preview is active */
}

/* When preview is active, find the main layout containers and remove their overflow properties
   to prevent them from clipping the fixed-position preview overlay. */
body.print-preview-mode .flex-1.flex.flex-col.overflow-hidden {
    overflow: visible !important;
}
body.print-preview-mode main.flex-1 {
    overflow: visible !important;
}


body.print-preview-mode .printable-area {
    position: fixed;
    inset: 0;
    z-index: 998;
    overflow: auto;
    padding: 2rem;
    background-color: transparent;
}
/* NEW: Remove border and shadow from the main container in preview mode */
body.print-preview-mode .printable-area {
    border: none !important;
    box-shadow: none !important;
}

body.print-preview-mode .printable-page {
    margin: 0 auto 2rem auto; /* Center horizontally and add space between pages */
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
    border: 1px solid #ccc;
    background: white;
    padding: 1cm; /* Simulate print margins */
    box-sizing: border-box;
}

/* A4 Portrait Size for preview */
body.print-preview-mode.preview-portrait .printable-page { width: 210mm; min-height: 297mm; }

/* Legal Landscape Size for preview */
body.print-preview-mode.preview-landscape .printable-page { width: 356mm; min-height: 216mm; }

#exit-preview-btn {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
}

.nav-link.active {
    background-color: oklch(var(--n) / var(--tw-bg-opacity, 1));
    color: oklch(var(--nc) / var(--tw-text-opacity, 1));
}

.sortable-ghost {
    opacity: 0.4;
    background-color: oklch(var(--b3) / 1);
}

/* --- Dashboard Edit Mode Styles --- */
.dashboard-grid.is-editing .dashboard-component {
    border: 2px dashed oklch(var(--b3));
    position: relative;
}

.dashboard-grid.is-editing .drag-handle {
    display: block;
    position: absolute;
    top: 8px;
    right: 8px;
    cursor: grab;
    padding: 4px;
    background-color: oklch(var(--b1) / 0.7);
    border-radius: 9999px;
    z-index: 10;
}

/* --- Desktop Sidebar Toggle --- */
#desktop-sidebar-toggle {
    /* Default position when sidebar is visible (w-64 = 16rem) */
    left: 16rem;
}

body.desktop-sidebar-collapsed #desktop-sidebar-toggle {
    /* Position when sidebar is hidden */
    left: 0.5rem;
}

@media (min-width: 768px) {
    body.desktop-sidebar-collapsed #sidebar-container {
        transform: translateX(-100%);
    }
}
